#!/bin/bash

#temp between 18 and 28 in dec
#humidity 60 to 68%
#decmeber average aqi is 73 to 20
#average pm10_aqi is 25 to  20
#average pm2.5_aqi is 17 to 6
#average pm10 is 25 to 20
#average pm2.5 is 9 to 3
lats=(50.629623 50.625895 50.621939 50.617864 50.615848 50.614469 50.611131 50.607265 50.600011 50.594713 50.592988 50.592466 50.590808 50.588739 50.584474 50.579868 50.57608 50.575712 50.576228 50.57418 50.572315 50.571168 50.570324 50.568715 50.568488 50.564397 50.561324 50.560311 50.557129 50.556841 50.556505 50.553284 50.55161 50.550991 50.546315 50.54175 50.536958 50.536847 50.535734 50.534035 50.53378 50.533737 50.534065 50.533818 50.53271 50.531304 50.528643 50.527847 50.523897 50.523593 50.522393 50.522087 50.521886 50.520808 50.517001 50.511726 50.505719 50.503564 50.502401 50.502244 50.50412 50.509183 50.510123 50.501229 50.499923 50.496557 50.492923 50.493607 50.496323 50.499343 50.498905 50.49785 50.497489 50.497738 50.497718 50.493792 50.496289 50.500096 50.503962 50.504206 50.504868 50.503848 50.501463 50.501178 50.499453 50.4987 50.497997 50.499889 50.500064 50.502598 50.504785 50.505486 50.505994 50.507138 50.509516 50.50899 50.506596 50.506531 50.507431 50.507523 50.507523 50.508754 50.512893 50.511687 50.510753 50.509833 50.510386 50.509842 50.50903 50.508725);
lons=(26.265227 26.267243 26.268655 26.267051 26.265351 26.263177 26.261898 26.260795 26.260477 26.25697 26.252174 26.250699 26.24811 26.245996 26.242957 26.240163 26.237683 26.236792 26.235103 26.233666 26.232347 26.231266 26.230329 26.229972 26.229486 26.227166 26.23076 26.235096 26.234628 26.232287 26.232251 26.232176 26.232532 26.235106 26.234661 26.234614 26.234574 26.234574 26.234569 26.234798 26.234719 26.233568 26.231769 26.23099 26.230501 26.22984 26.228286 26.227737 26.224562 26.22424 26.222281 26.221577 26.219927 26.216493 26.208625 26.201707 26.19316 26.187154 26.180678 26.17407 26.162626 26.147628 26.141013 26.142392 26.142793 26.143564 26.144302 26.143972 26.143488 26.142411 26.140128 26.136502 26.134443 26.131761 26.128974 26.121921 26.115533 26.115836 26.110726 26.108063 26.10548 26.104059 26.103546 26.103546 26.103403 26.103389 26.10326 26.098093 26.096851 26.097197 26.096907 26.096211 26.094115 26.092872 26.086515 26.08509 26.081107 26.078382 26.071722 26.068635 26.06257 26.058856 26.048726 26.048826 26.049754 26.050572 26.053678 26.054164 26.056458 26.056735);
epoch_time=1671394327;

# path="/air_parameters/temp_values/$epoch_time"
send_data(){
    # this function generates random values based on the ranges above and sends them to a firebase database.
    hum=$(shuf -i 60-68 -n1)
    temp=$(shuf -i 18-28 -n1)
    pm25=$(shuf -i 3-20 -n1)
    pm10=$(shuf -i 20-75 -n1)
    tvoc=$(shuf -i 20-50 -n1)
    co2=$(shuf -i 300-450 -n1)
    formaldahide=$(shuf -i 0-20 -n1)
    lat=${lats[n]};
    lon=${lons[n]};

    
    JSON=$(jo co2="$co2" counter=1 formaldahide="$formaldahide" temp="$temp" hum="$hum" lat="$lat" lon="$lon" pm10="$pm10" pm25="$pm25" tvoc="$tvoc")
    firebase database:set "/air_parameters/temp_values/${epoch_time}/" --data "$JSON" --force
}

n=15
while true; do 
    while [ $n -lt 110 ]; do
        send_data n;
        let n=$n+4;
        let epoch_time=$epoch_time+1800;
        
    done 
    n=109;
    while [ $n -gt 0 ]; do
        send_data n;
        let n=$n-4;
        let epoch_time=$epoch_time+1800;
        
    done 
done


